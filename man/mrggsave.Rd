% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mrggsave.R
\name{mrggsave}
\alias{mrggsave}
\alias{mrggsave.ggplot}
\alias{mrggsave.ggmatrix}
\alias{mrggsave.gList}
\alias{mrggsave.gtable}
\alias{mrggsave.trellis}
\alias{mrggsave.ggassemble}
\alias{mrggsave.list}
\alias{mrggsave.gg}
\alias{mrgglabel}
\alias{mrggsave_common}
\title{Label, arrange, and save graphics}
\usage{
mrggsave(x, ...)

\method{mrggsave}{ggplot}(x, ..., ypad = 2, arrange = FALSE,
  ncol = 1, onefile = TRUE)

\method{mrggsave}{ggmatrix}(x, ..., ypad = 4, arrange = FALSE,
  onefile = TRUE)

\method{mrggsave}{gList}(...)

\method{mrggsave}{gtable}(...)

\method{mrggsave}{trellis}(x, ..., ypad = 3, arrange = FALSE,
  ncol = 1, onefile = TRUE)

\method{mrggsave}{ggassemble}(x, ...)

\method{mrggsave}{list}(x, ..., arrange = FALSE, use_names = FALSE)

\method{mrggsave}{gg}(x, ...)

mrgglabel(..., draw = FALSE, .save = FALSE)

mrggsave_common(x, script = getOption("mrg_script_name", NULL),
  tag = NULL, width = 5, height = 5, stem = "Rplot",
  dir = getOption("mrggsave_dir", "../deliv/figure"),
  prefix = gsub("^\\\\.\\\\./", "./", dir), onefile = TRUE,
  arrange = FALSE, draw = FALSE, .save = TRUE, ypad = 3,
  labsep = "\\n", fontsize = 7, textGrob.x = 0.01,
  textGrob.y = 0.25, dev = "pdf", res = 150, units = "in",
  envir = .GlobalEnv, ...)
}
\arguments{
\item{x}{an object or list of objects of class \code{gg}}

\item{...}{other arguments passed to \code{mrggsave_common} and then
on to \code{\link{pdf}} and \code{arrangeGrob}}

\item{ypad}{integer number of newlines to separate annotation
from x-axis title}

\item{arrange}{logical; if \code{TRUE}, arrange the ggplot objects on a
single page with \code{arrangeGrob}}

\item{ncol}{passed to \code{\link{arrangeGrob}}}

\item{onefile}{passed to \code{\link{pdf}}}

\item{use_names}{if \code{TRUE}, the names from a list of plots will be used
as the stems for output file names}

\item{draw}{if \code{TRUE}, the plot is drawn using \code{\link{draw_newpage}}}

\item{.save}{logical; if \code{FALSE}, return the labeled objects}

\item{script}{the name of the script generating the \code{gg} objects}

\item{tag}{if specified, stem is overwritten by pasting \code{script}
and \code{tag} together}

\item{width}{passed to \code{\link{pdf}}; should be less than 5 in.
for portrait figure}

\item{height}{passed to \code{\link{pdf}}; should be less than 7 in.
for portrait figure}

\item{stem}{to form the name of the output \code{.pdf} file}

\item{dir}{output directory for \code{.pdf} file}

\item{prefix}{gets prepended to the output file path in the Source
graphic, label}

\item{labsep}{character separator (or newline) for Source code and
Source graphic labels}

\item{fontsize}{for Source graphic and Source code labels}

\item{textGrob.x}{passed to \code{textGrob} (as \code{x})}

\item{textGrob.y}{passed to \code{textGrob} (as \code{y})}

\item{dev}{the device to use}

\item{res}{passed to \code{\link{png}}}

\item{units}{passed to \code{\link{png}}}

\item{envir}{environment to be used for string interpolation in
stem and tag}
}
\description{
Save plot objects as .pdf file after labeling with Source graphic and
Source code labels.
}
\details{
Methods are provided for \code{ggplot} output, \code{lattice}
output, and \code{ggmatrix} objects (produced by
\code{GGally::ggpairs}).  Either a single plot object
or a list of objects can be passed in.  If a list of objects
are passed in, the plots may be written to a single file (default)
or multiple files (if \code{onefile} is \code{FALSE}).
Alternatively, \code{ggplots} and \code{lattice plots}
can be arranged on a single page when
\code{arrange} is \code{TRUE}.  \code{ggmatrix} objects
cannot be arranged.  An error is generated if different
object types are passed in a single list.

By default, the output file name is generated from
the script name and the value in \code{tag}.  For example,
when the script is named \code{vpc_figures} and the tag
is passed as \code{_by_dose_group}, the output file name
will be \code{vpc_figures_by_dose_group.pdf}.  Alternatively,
the user can specify the complete stem of the file
name with the \code{stem} argument.

When \code{.save} is \code{FALSE}, \code{mrggsave}
always returns a list of table grobs.  If a single
plot was passed, the return value in this case
is a list of length 1.

\code{mrgglabel} calls \code{mrggsave} and
neither draws nor saves the plot, but
returns the annotated plots as table grob.
}
\examples{
data(Theoph)
require(ggplot2)

x <- runif(1000,10,100)
y <- 0.3*x + rnorm(length(x),0,20)
data <- data.frame(x = x, y = y)

Script <- "example.R"

# NOTE: see default value for dir argument, which should be appropriate
# for project work

# Changing it here only for the example
options(mrggsave_dir = tempdir())


p1 <- ggplot(data=Theoph) +
  geom_line(aes(x=Time, y=conc, group=Subject))

p2 <- ggplot(data=Theoph) +
  geom_line(aes(x=Time, y=conc)) +
  facet_wrap(~Subject)

mrggsave(p1, Script, "_plot1")
mrggsave(p2, Script, "_plot2")

mrggsave(list(p1,p2), Script, "both_plots")
mrggsave(list(p1,p2), Script, "separate_files", onefile=FALSE)

mrggsave(p1, Script, "different_shape", width=10, height=4)

mrggsave(list(p1,p2), Script, "onepage", arrange=TRUE, ncol=2)

stopifnot(require(GGally))

p3 <- ggpairs(data)

mrggsave(p3, Script, "ggally_plot")

}
\seealso{
\code{\link{mrggdraw}}, \code{\link{mrggsave_list}}
}
