% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mrggsave.R
\name{mrggsave}
\alias{mrggsave}
\alias{mrggsave.ggplot}
\alias{mrggsave.ggmatrix}
\alias{mrggsave.trellis}
\alias{mrggsave.list}
\alias{mrggsave.gg}
\alias{mrggdraw}
\alias{mrgglabel}
\title{Label, arrange, and save graphics}
\usage{
mrggsave(x, ...)

\method{mrggsave}{ggplot}(x, script, tag = NULL, stem = "Rplot",
  dir = getOption("mrggsave_dir", "../deliv/figure"),
  prefix = gsub("^\\\\.\\\\./", "./", dir), onefile = TRUE,
  arrange = FALSE, labsep = "\\n", fontsize = 7, textGrob.x = 0.01,
  textGrob.y = 0.25, ypad = 2, width = 5, height = 5, draw = FALSE,
  nosave = FALSE, ...)

\method{mrggsave}{ggmatrix}(x, script, tag = NULL, stem = "Rplot",
  dir = getOption("mrggsave_dir", "../deliv/figure"),
  prefix = gsub("^\\\\.\\\\./", "./", dir), onefile = TRUE,
  arrange = FALSE, labsep = "\\n", fontsize = 7, textGrob.x = 0.01,
  textGrob.y = 0.25, ypad = 4, width = 5, height = 5, draw = FALSE,
  nosave = FALSE, ...)

\method{mrggsave}{trellis}(x, script, tag = NULL, stem = "Rplot",
  dir = getOption("mrggsave_dir", "../deliv/figure"),
  prefix = gsub("^\\\\.\\\\./", "./", dir), onefile = TRUE,
  arrange = FALSE, labsep = "\\n", fontsize = 7, textGrob.x = 0.0025,
  textGrob.y = 0.6, ypad = 3, draw = FALSE, nosave = FALSE, ...)

\method{mrggsave}{list}(x, ..., arrange = FALSE)

\method{mrggsave}{gg}(x, ...)

mrggdraw(..., draw = TRUE, nosave = TRUE)

mrgglabel(..., draw = FALSE, nosave = TRUE)
}
\arguments{
\item{x}{an object or list of objects of class \code{gg}}

\item{...}{other arguments passed to \code{\link{pdf}} or
\code{arrangeGrob}}

\item{script}{the name of the script generating the \code{gg} objects}

\item{tag}{if specified, stem is overwritten by pasting \code{script}
and \code{tag} together}

\item{stem}{to form the name of the output \code{.pdf} file}

\item{dir}{output directory for \code{.pdf} file}

\item{prefix}{gets prepended to the output file path in the Source
graphic, label}

\item{onefile}{passed to \code{\link{pdf}}}

\item{arrange}{logical; if \code{TRUE}, arrange the ggplot objects on a
single page with \code{arrangeGrob}}

\item{labsep}{character separator (or newline) for Source code and
Source graphic labels}

\item{fontsize}{for Source graphic and Source code labels}

\item{textGrob.x}{passed to \code{textGrob} (as \code{x})}

\item{textGrob.y}{passed to \code{textGrob} (as \code{y})}

\item{ypad}{integer number of newlines to separate annotation
from x-axis title}

\item{width}{passed to \code{\link{pdf}}}

\item{height}{passed to \code{\link{pdf}}}

\item{draw}{if \code{TRUE}, the plot is drawn using \code{\link{draw_newpage}}}

\item{nosave}{logical; if \code{TRUE}, return the labeled objects}
}
\value{
The name of the output file.
}
\description{
Save plot objects as .pdf file after labeling with Source graphic and
Source code labels.
}
\details{
Methods are provided for \code{ggplot} output, \code{lattice}
output, and \code{ggmatrix} objects (produced by
\code{GGally::ggpairs}).  Either a single plot object
or a list of objects can be passed in.  If a list of objects
are passed in, the plots may be written to a single file (default)
or multiple files (if \code{onefile} is \code{FALSE}).
Alternatively, \code{ggplots} and \code{lattice plots}
can be arranged on a single page when
\code{arrange} is \code{TRUE}.  \code{ggmatrix} objects
cannot be arranged.  An error is generated if different
object types are passed in a single list.

By default, the output file name is generated from
the script name and the value in \code{tag}.  For example,
when the script is named \code{vpc_figures} and the tag
is passed as \code{_by_dose_group}, the output file name
will be \code{vpc_figures_by_dose_group.pdf}.  Alternatively,
the user can specify the complete stem of the file
name with the \code{stem} argument.

\code{mrggdraw} calls \code{mrggsave} and draws
the plot but does not save it.

\code{mrgglabel} calls \code{mrggsave} and
neither draws nor saves the plot, but
returns the annotated plots as table grob.
}
\examples{
data(Theoph)
require(ggplot2)

x <- runif(1000,10,100)
y <- 0.3*x + rnorm(length(x),0,20)
data <- data.frame(x = x, y = y)

Script <- "example.R"

# NOTE: see default value for dir argument, which should be appropriate
# for project work

# Changing it here only for the example
options(mrggsave_dir = tempdir())


p1 <- ggplot(data=Theoph) +
  geom_line(aes(x=Time, y=conc, group=Subject))

p2 <- ggplot(data=Theoph) +
  geom_line(aes(x=Time, y=conc)) +
  facet_wrap(~Subject)

mrggsave(p1, Script, "_plot1")
mrggsave(p2, Script, "_plot2")

mrggsave(list(p1,p2), Script, "_both_plots")
mrggsave(list(p1,p2), Script, "_separate_files", onefile=FALSE)

mrggsave(p1, Script, "_different_shape", width=10, height=4)

mrggsave(list(p1,p2), Script, "_onepage", arrange=TRUE, ncol=2)

stopifnot(require(GGally))

p3 <- ggpairs(data)

mrggsave(p3, Script, "_ggally_plot")

}
